{"version":3,"sources":["src\\refire\\tasks.js"],"names":["initialized","handler","store","action","state","getState","currentGoal","type","id","ref","database","orderByChild","equalTo","on","_v","value","forEach","sn","push","val","key","dispatch"],"mappings":";;;;;;;;AAAA;;;;;;AAEA,IAAIA,cAAc,KAAlB;AACA,IAAMC,UAAU,SAAVA,OAAU,CAACC,KAAD,EAAQC,MAAR,EAAiB;AAC/B,MAAMC,QAAQF,MAAMG,QAAN,EAAd;AAD+B,MAExBC,WAFwB,GAETF,KAFS,CAExBE,WAFwB;;;AAI/B,MAAGH,OAAOI,IAAP,IAAe,kBAAf,IAAsCD,eAAe,CAACN,WAAzD,EAAsE;AACpEA,kBAAc,IAAd;AACA,QAAMQ,KAAKN,MAAMG,QAAN,GAAiBC,WAAjB,CAA6BE,EAAxC;AACA,QAAMC,MAAM,mBAASC,QAAT,GAAoBD,GAApB,CAAwB,OAAxB,CAAZ;AACAA,QAAIE,YAAJ,CAAiB,QAAjB,EAA2BC,OAA3B,CAAmCJ,EAAnC,EAAuCK,EAAvC,CAA0C,OAA1C,EAAmD,UAACC,EAAD,EAAM;AACvD,UAAIC,QAAQ,EAAZ;AACAD,SAAGE,OAAH,CAAW,UAACC,EAAD,EAAM;AACfF,cAAMG,IAAN,cAAeD,GAAGE,GAAH,EAAf,IAAyBX,IAAIS,GAAGG,GAAhC;AACD,OAFD;AAGAlB,YAAMmB,QAAN,CAAe;AACbd,cAAM,WADO;AAEbQ,eAAOA;AAFM,OAAf;AAID,KATD;AAUD;AACF,CAnBD;;kBAqBed,O","file":"tasks.js","sourceRoot":"C:/Users/Ryan/Documents/dev/embark/covailnt","sourcesContent":["import firebase from './firebase'\n\nlet initialized = false\nconst handler = (store, action)=>{\n  const state = store.getState()\n  const {currentGoal} = state;\n  \n  if(action.type == 'SET_CURRENT_GOAL' || (currentGoal && !initialized)){\n    initialized = true;\n    const id = store.getState().currentGoal.id\n    const ref = firebase.database().ref('tasks')\n    ref.orderByChild('goalId').equalTo(id).on('value', (_v)=>{\n      let value = [];\n      _v.forEach((sn)=>{\n        value.push({...sn.val(), id: sn.key})\n      })\n      store.dispatch({\n        type: 'SET_TASKS',\n        value: value\n      })\n    })\n  }\n}\n\nexport default handler"]}
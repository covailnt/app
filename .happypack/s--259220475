'use strict';

require('core-js/fn/object/assign');

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _reactDom = require('react-dom');

var _reactDom2 = _interopRequireDefault(_reactDom);

var _App = require('./components/App');

var _App2 = _interopRequireDefault(_App);

var _reactRedux = require('react-redux');

var _app = require('stores/app');

var _app2 = _interopRequireDefault(_app);

var _firebase = require('./refire/firebase');

var _firebase2 = _interopRequireDefault(_firebase);

require('./theme/theme.scss');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

window.React = _react2.default;

_firebase2.default.auth().onAuthStateChanged(function (user) {
  if (user) {
    _app2.default.dispatch({
      type: 'SET_CURRENT_USER',
      value: user
    });

    _firebase2.default.database().ref('users/' + user.uid).set({
      displayName: user.displayName
    });
  }
  start();
});

var start = function start() {
  // Render the main component into the dom
  _reactDom2.default.render(_react2.default.createElement(
    _reactRedux.Provider,
    { store: _app2.default },
    _react2.default.createElement(_App2.default, null)
  ), document.getElementById('app'));
};
{"version":3,"sources":["src\\refire\\authorizedUsers.js"],"names":["initialized","handler","store","action","state","getState","type","currentProject","ref","database","id","value","orderByChild","equalTo","on","_v","forEach","sn","push","val","key","dispatch"],"mappings":";;;;;;;;AAAA;;;;;;AAEA,IAAIA,cAAc,KAAlB;AACA,IAAMC,UAAU,SAAVA,OAAU,CAACC,KAAD,EAAQC,MAAR,EAAiB;AAC/B,MAAMC,QAAQF,MAAMG,QAAN,EAAd;AACA,MAAGF,OAAOG,IAAP,IAAe,qBAAf,IAAyC,CAACN,WAAD,IAAgBI,MAAMG,cAAlE,EAAkF;AAChFP,kBAAc,IAAd;AACA,QAAMQ,MAAM,mBAASC,QAAT,GAAoBD,GAApB,CAAwB,oBAAxB,CAAZ;AACA,QAAIE,KAAK,CAACP,OAAOQ,KAAP,IAAgB,EAAjB,EAAqBD,EAArB,IAA2BN,MAAMG,cAAN,CAAqBG,EAAzD;;AAEAF,QAAII,YAAJ,CAAiB,WAAjB,EAA8BC,OAA9B,CAAsCH,EAAtC,EAA0CI,EAA1C,CAA6C,OAA7C,EAAsD,UAACC,EAAD,EAAM;AAC1D,UAAIJ,QAAQ,EAAZ;;AAEAI,SAAGC,OAAH,CAAW,UAACC,EAAD,EAAM;AACfN,cAAMO,IAAN,cAAeD,GAAGE,GAAH,EAAf,IAAyBT,IAAIO,GAAGG,GAAhC;AACD,OAFD;AAGAlB,YAAMmB,QAAN,CAAe;AACbf,cAAM,sBADO;AAEbK,eAAOA;AAFM,OAAf;AAID,KAVD;AAWD;AACF,CAnBD;;kBAqBeV,O","file":"authorizedUsers.js","sourceRoot":"C:/Users/Ryan/Documents/dev/embark/covailnt","sourcesContent":["import firebase from './firebase'\n\nlet initialized = false\nconst handler = (store, action)=>{\n  const state = store.getState()\n  if(action.type == 'SET_CURRENT_PROJECT' || (!initialized && state.currentProject)){\n    initialized = true\n    const ref = firebase.database().ref('authorizedProjects')\n    let id = (action.value || {}).id || state.currentProject.id\n\n    ref.orderByChild('projectId').equalTo(id).on('value', (_v)=>{\n      let value = [];\n\n      _v.forEach((sn)=>{\n        value.push({...sn.val(), id: sn.key})\n      })\n      store.dispatch({\n        type: 'SET_AUTHORIZED_USERS',\n        value: value\n      })\n    })\n  }\n}\n\nexport default handler"]}
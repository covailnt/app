{"version":3,"sources":["src\\refire\\projects.js"],"names":["handler","store","action","type","uid","getState","currentUser","ref","database","orderByChild","equalTo","on","_v","value","forEach","sn","val","projectId","once","then","snpr","push","id","key","dispatch"],"mappings":";;;;;;;;AAAA;;;;;;AAEA,IAAMA,UAAU,SAAVA,OAAU,CAACC,KAAD,EAAQC,MAAR,EAAiB;AAC/B,MAAGA,OAAOC,IAAP,IAAe,kBAAlB,EAAqC;AACnC,QAAMC,MAAMH,MAAMI,QAAN,GAAiBC,WAAjB,CAA6BF,GAAzC;AACA,QAAMG,MAAM,mBAASC,QAAT,GAAoBD,GAApB,CAAwB,oBAAxB,CAAZ;AACAA,QAAIE,YAAJ,CAAiB,OAAjB,EAA0BC,OAA1B,CAAkCN,GAAlC,EAAuCO,EAAvC,CAA0C,OAA1C,EAAmD,UAACC,EAAD,EAAM;AACvD,UAAIC,QAAQ,EAAZ;;AAEAD,SAAGE,OAAH,CAAW,UAACC,EAAD,EAAM;AACf,2BAASP,QAAT,GAAoBD,GAApB,CAAwB,cAAaQ,GAAGC,GAAH,GAASC,SAA9C,EAAyDC,IAAzD,CAA8D,OAA9D,EAAuEC,IAAvE,CAA4E,UAACC,IAAD,EAAQ;AAClFP,gBAAMQ,IAAN,cAAeD,KAAKJ,GAAL,EAAf,IAA2BM,IAAIF,KAAKG,GAApC;AACAtB,gBAAMuB,QAAN,CAAe;AACbrB,kBAAM,cADO;AAEbU,mBAAOA;AAFM,WAAf;AAID,SAND;AAOD,OARD;AASD,KAZD;AAaD;AACF,CAlBD;;kBAoBeb,O","file":"projects.js","sourceRoot":"C:/Users/Ryan/Documents/dev/embark/covailnt","sourcesContent":["import firebase from './firebase'\n\nconst handler = (store, action)=>{\n  if(action.type == 'SET_CURRENT_USER'){\n    const uid = store.getState().currentUser.uid\n    const ref = firebase.database().ref('authorizedProjects')\n    ref.orderByChild('owner').equalTo(uid).on('value', (_v)=>{\n      let value = [];\n\n      _v.forEach((sn)=>{\n        firebase.database().ref('projects/'+ sn.val().projectId).once('value').then((snpr)=>{\n          value.push({...snpr.val(), id: snpr.key})\n          store.dispatch({\n            type: 'SET_PROJECTS',\n            value: value\n          })\n        })\n      })\n    })\n  }\n}\n\nexport default handler"]}